---
id: control_flow
layout: page 
title: Условия и циклы
---

В обычной жизни мы часто задём друг другу вопросы "Ты хочешь есть?", "Тебе
жарко?". На такие вопросы мы может дать простой ответ "Да" или "Нет". Всё, что
мы обычно делаем, является ответом на какие-то изменения вокруг нас. Например,
если в комнате стало темно, мы включает свет. На языке С++ последнее предложение
можно записать так:

{% highlight c++ %}
if (isDark())
{
    lightTurnOn();
}
{% endhighlight %}

Такие выражения называются условиями. Условия позволяют задавать действия,
которые должны выполниться, если какое событие произошло. Если событие
произошло, говорим что оно истино. Если не произошло ложно. Значение истины в
C++ будет задавать ключевым словом true, а значение ложно - false. Переменные,
которые могут принимать эти два значения называют логическими. В С++ тип
логический операций будет bool. Так мы может создать новыую переменную типа
bool, которая будет значение "истино":

{% highlight c++ %}
bool b = true;
{% endhighlight %}

В так переменную, которая будет иметь значение "ложно":

{% highlight c++ %}
bool b = false;
{% endhighlight %}

Над переменными типа bool можно производить два основных действия:

 * Логическое "или"
 * Логическое "и"

Обе операции являются бинарными, т.е. должны принимать два параметра типа bool.
Результатом выполнения операций тоже является значение типа bool. Все возможные
значения, которая возвращает операторы удобно представлять ввиде таблицы. Такие
таблицы называют таблицами истиности.

Любое число значение в C++ может налету преобразовываться в тип bool и обратно.
Для этого в стандарте C++ прописано правило: если число равно 0, то это будет
false, а все остальные числа будут true. Поэтому вы можете написать такой код:

{% highlight c++ %}
if (10)
{
    // Сделай что-то
}
{% endhighlight %}

и он будет правильно работать.

Все символы, которые мы пишем в одинарных кавычках явлются числами. Поэтому мы
можем писать такие выражения:

{% highlight c++ %}
bool b = 'A' - 'A'; // false
{% endhighlight %}

Хотя выглядят они довольно странно.

Основное использование логических выражений это условия. Условия задаются
выражениями вида:

{% highlight c++ %}
if (<выражение типа bool>)
{
    // Какие-то действия которые надо выполнить
}
{% endhighlight %}

Мы можем задать и более сложное выражение:

{% highlight c++ %}
if (<выражение типа bool>)
{
    // Какие-то действия которые надо выполнить
}
else
{
    // Действия, которые выполняться, если выражение ложно.
}
{% endhighlight %}

Конструкция else задаёт действия, которые должны выполниться, если выражения,
которые мы передали на вход в if имеет значение false.

Действия заданные внутри if будут выполняться один раз. Но что, если нам нужно,
чтобы действие выполнялось постоянно?.. Например, каждый утро мы встаём,
умываемся и идем завтракать. Для таких повторяющихся действий в C++ есть
специальная конструкция while. Например, фразу если утро, то надо вставать можно
записать как:

{% highlight c++ %}
while(isMorning())
{
    getUp();
}
{% endhighlight %}

И теперь каждое утро мы будем просыпаться :). Конструкцию while называют циклом
с предусловием. Она отличается от if, тем что действия внутри фигурных скобок
будут выполняться бесконечно, пока условие истино. Для while нельзя задать
выражение else. Трудно предствить где while и else могли бы использоваться
вместе.

Помимо цикла с предусловием, есть еще цикл с постусловием. Выглядит он вот так:

{% highlight c++ %}
do
{
    sleep();
}
while(isNight());
{% endhighlight %}

Это конструкцию можно прочитать как "Я лег спать, и буду спать пока будет ночь".
Отличие do-while от while в том, что действия описанные внутри фигурных скобок
всегда выполнять один раз. А затем программа проверит условие и выполнит
действия снова, если они выражение истино.

Многие действия надо выполнять определённое количество раз. Например, у меня
троё друзей и мне надо купить им подарки на новый. Я должен купить три подарка,
т.е. выполнить действия "купить подарок" три раза. Чтобы написать на С++, я
должен создать счётчик, который будет считать сколько подарков я уже купил и
выполнять действия до тех пор, пока значение счётчика меньше 3. Кусочек кода
будет выглядеть как-то так:

{% highlight c++ %}
int counter = 0;
while (counter < 3)
{
    buyPresent();
    ++counter;
}
{% endhighlight %}

Похожие кусочки кода будут повторяться в ваших программах довольно часто.
Поэтому для неё существует запись покороче - с помощью конструкции for. Код
написанный выше можно переписать следующим образом:

{% highlight c++ %}
for (int counter = 0; counter < 3; ++counter)
{
    buyPresent();
}
{% endhighlight %}

Цикл for в C++ намного сложнее, чем во многих других языках. Но являсь
синстаксическим сахаром над циклом while, он обладает огромной гибкостью. Любую
программу на C++ можно затолкать всего лишь в одну конструкцию for. Правда тот,
кто будет её читать, наверное станёт плакать :).

Условия if, if-else и циклы while, do-while, for являются основными
конструкциями языка. Они задают порядок выполнения выражений в программе. А все
остальные конструкции служат для группировки выражений.
